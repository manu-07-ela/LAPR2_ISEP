@startuml
'https://plantuml.com/sequence-diagram

autonumber

actor "Administrator" as ADM

participant ": CreateParameterUI" as UI
participant ": CrateParameterController" as CTRL
participant ": Company" as COMP
participant ": store: ParameterStore" as STORE
participant ": ParameterCategoryMapper" as MAPPER
participant ": ParameterCategoryStore" as PC
participant "p: Parameter" as PRMT


activate ADM
ADM -> UI: starts new parameter
activate UI
UI --> ADM : request data (code, shortName, description)
deactivate UI
ADM -> UI: types requested data
activate UI
UI -> CTRL : lc=getParameterCategories
activate CTRL
CTRL -> STORE : transformInParameterCategoryDto()
activate STORE
STORE --> "listParameterCategory : List<ParameterCategory>"** : create()
STORE -> MAPPER : toDTO(listParameterCategory)
activate MAPPER
MAPPER -> PC : getParameterCategories()
activate PC
deactivate PC
loop for each object in listParameterCategory
MAPPER ->"listParameterCategory : List<ParameterCategory>" : ParameterCategory = getParameterCategories(i)
activate "listParameterCategory : List<ParameterCategory>"
deactivate "listParameterCategory : List<ParameterCategory>"
MAPPER->MAPPER : ParameterCategoriesDto = toParameterCategory(ParameterCategoryDto)
activate MAPPER
deactivate MAPPER
MAPPER-> "listParameterCategoryDto : List<ParameterCategoryDto>" : addParameterCategory(ParameterCategoryDto)
activate "listParameterCategoryDto : List<ParameterCategoryDto>"
deactivate "listParameterCategoryDto : List<ParameterCategoryDto>"
end
MAPPER --> STORE : listParameterCategoryDto
deactivate MAPPER
STORE --> CTRL : listParameterCategory
deactivate STORE
CTRL --> UI : listParameterCategory
deactivate CTRL
UI --> ADM : shows the categories available
deactivate UI






ADM -> UI: inserts the category
activate UI
UI -> CTRL : createParameter(code, shortName, description, selectedCategory)
activate CTRL
CTRL -> COMP : store = createParameterStore()
activate COMP
COMP -> MAPPER : toDTO(listParameterCategory)
deactivate COMP
activate MAPPER
MAPPER->MAPPER : ParameterCategoriesDto = toDto(ParameterCategory)
MAPPER --> CTRL : ParameterCategory
deactivate MAPPER
CTRL -> STORE : t = createParameter(code,shortName,description,selectedCategory)
activate STORE
STORE -> PRMT** : create(code,shortName,description,categoryCode)
deactivate STORE
CTRL -> STORE : validateParameter(p)
activate STORE
deactivate STORE
deactivate CTRL
UI --> ADM : shows all data and asks for confirmation
deactivate UI








ADM -> UI: confirms the data
activate UI
activate CTRL
UI -> CTRL : saveParameter()
activate STORE
CTRL -> STORE : saveParameter(p)
STORE -> STORE : validateParameter(p)
activate STORE
deactivate STORE
STORE ->STORE : addParameter(p)
activate STORE
deactivate STORE
deactivate STORE
deactivate STORE
CTRL --> UI : result
deactivate CTRL
UI --> ADM : informs the operation success
deactivate UI
deactivate ADM

@enduml